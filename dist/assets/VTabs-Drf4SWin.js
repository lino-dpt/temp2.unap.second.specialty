import{a0 as Ie,ai as Ae,C as ne,a1 as we,aj as Te,ak as be,al as Fe,am as Ee,an as he,ao as Pe,ap as Be,aq as ge,ar as $e,as as ze,G as oe,J as ye,K as j,at as De,au as Le,av as Ce,aw as Me,ax as Oe,ay as Re,az as Ge,aA as Ue,M as _e,aB as P,H as Ye,b as a,aC as je,q as N,W as se,h as g,S as ee,d as He,v as Ne,r as s,o as z,l as ae,w as t,c as J,e as W,i,n as X,B as U,F as Z,m as re,y as Y,T as te,t as T,ac as qe,ab as H,a as K,f as ie,D as Je,aD as We,Q as Ve,Y as Xe,aE as Ke,aF as Qe,aG as Ze,aH as ea,aI as aa,aJ as ta}from"./index-jeXwK5-A.js";import{V as D,d as ue,a as de}from"./VCard-DTb05tUH.js";import{V as le,a as L}from"./VRow-VqxmcHT8.js";import{a as Q,V as ce,m as la,b as ve}from"./VChip-DT_tKx8U.js";import{V as me}from"./VForm-Cz10qOts.js";import{V as na}from"./VSelect-FB-q_IvU.js";import{V as fe}from"./VTextField-K4i1ZHlG.js";const oa="https://data.segundas.unap.edu.pe/api",M=Ie.create({baseURL:oa,headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),Aa=async e=>(await M.get("postulants/generals/"+e)).data,sa=async e=>(await M.get("postulants/evaluation/"+e)).data,ra=async e=>(await M.post("postulants/evaluation",e)).data,pe=async e=>(await M.post("postulants/evaluation-detail",e)).data,ia=async e=>(await M.post("postulants/experience/minus",e)).data,ua=async e=>(await M.post("postulants/experience/add",e)).data,da=async e=>(await M.delete("postulants/evaluation/"+e)).data,ca=Ae("v-alert-title"),va=["success","info","warning","error"],ma=ne({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:we,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>va.includes(e)},...Te(),...be(),...Fe(),...Ee(),...he(),...Pe(),...Be(),...ge(),...$e(),...ze({variant:"flat"})},"VAlert"),fa=oe()({name:"VAlert",props:ma(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,r){let{emit:u,slots:n}=r;const C=ye(e,"modelValue"),y=j(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),c=j(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:_}=De(e),{colorClasses:f,colorStyles:p,variantClasses:B}=Le(c),{densityClasses:k}=Ce(e),{dimensionStyles:v}=Me(e),{elevationClasses:h}=Oe(e),{locationStyles:I}=Re(e),{positionClasses:F}=Ge(e),{roundedClasses:E}=Ue(e),{textColorClasses:$,textColorStyles:d}=_e(P(e,"borderColor")),{t:A}=Ye(),S=j(()=>({"aria-label":A(e.closeLabel),onClick(m){C.value=!1,u("click:close",m)}}));return()=>{const m=!!(n.prepend||y.value),O=!!(n.title||e.title),w=!!(n.close||e.closable);return C.value&&a(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},_.value,f.value,k.value,h.value,F.value,E.value,B.value,e.class],style:[p.value,v.value,I.value,e.style],role:"alert"},{default:()=>{var R,G;return[je(!1,"v-alert"),e.border&&a("div",{key:"border",class:["v-alert__border",$.value],style:d.value},null),m&&a("div",{key:"prepend",class:"v-alert__prepend"},[n.prepend?a(se,{key:"prepend-defaults",disabled:!y.value,defaults:{VIcon:{density:e.density,icon:y.value,size:e.prominent?44:28}}},n.prepend):a(N,{key:"prepend-icon",density:e.density,icon:y.value,size:e.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[O&&a(ca,{key:"title"},{default:()=>{var b;return[((b=n.title)==null?void 0:b.call(n))??e.title]}}),((R=n.text)==null?void 0:R.call(n))??e.text,(G=n.default)==null?void 0:G.call(n)]),n.append&&a("div",{key:"append",class:"v-alert__append"},[n.append()]),w&&a("div",{key:"close",class:"v-alert__close"},[n.close?a(se,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var b;return[(b=n.close)==null?void 0:b.call(n,{props:S.value})]}}):a(g,ee({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},S.value),null)])]}})}}}),wa=He({__name:"TabCv",setup(e){const r=Ne(),u=s({indicator:null,description:"",criteria:1,evaluationId:null}),n=s({indicator:{id:3,name:"Certificación",score:1},description:"Años de Experiencia",criteria:2,evaluationId:null}),C=s({indicator:{id:4,name:"Certificación",score:.25},description:"",criteria:3,evaluationId:null}),y=s(null),c=s(0),_=s(null),f=s(0),p=s(null),B=s(0),k=s(0),v=s(!1),h=s(!1),I=s(!1),F=s(!1),E=s(!1),$=s(!1),d=s(null),A=s([{id:1,name:"Título profesional",score:8},{id:2,name:"Maestría",score:2}]),S=s([{id:1,name:"Formación académica",description:"Formación académica",maxScore:20},{id:2,name:"Experiencia laboral",description:"Experiencia laboral",maxScore:20},{id:3,name:"Capacitaciones",description:"Formación profesional",maxScore:20}]),m=async()=>{let V=await sa(r.params.id);d.value=V||null;let o=V.details;y.value=o.filter(l=>l.EvaluationIndicatorId===1||l.EvaluationIndicatorId===2),_.value=o.filter(l=>l.EvaluationIndicatorId===3),p.value=o.filter(l=>l.EvaluationIndicatorId===4),c.value=y.value.reduce((l,x)=>l+parseFloat(x.Score)*parseFloat(x.Amount),0),f.value=_.value.reduce((l,x)=>l+parseFloat(x.Score)*parseFloat(x.Amount),0),B.value=p.value.reduce((l,x)=>l+parseFloat(x.Score)*parseFloat(x.Amount),0),c.value=c.value>10?10:c.value,k.value=c.value+f.value+B.value},O=async()=>{let V={postulantId:r.params.id,callId:1},o=await ra(V);d.value=o?o.evaluacion:null},w=async()=>{try{h.value=!0,u.value.evaluationId=d.value.Id,await pe(u.value),await m(),h.value=!1,u.value.indicator=null,u.value.description="",v.value=!1}catch{alert("Ocurrio un error")}},R=async()=>{try{F.value=!0,C.value.evaluationId=d.value.Id,await pe(C.value),I.value=!1,F.value=!1,C.value.description="",await m()}catch{alert("Ocurrio un error")}},G=async()=>{$.value=!0,n.value.evaluationId=d.value.Id,await ua(n.value),await m(),$.value=!1},b=async()=>{E.value=!0,n.value.evaluationId=d.value.Id,await ia(n.value),await m(),E.value=!1},q=async(V,o,l)=>{l==="FA"?y.value[o].loading=!0:p.value[o].loading=!0,await da(V),await m()};return(async()=>{await m()})(),(V,o)=>(z(),ae(Z,null,[a(W,{fluid:""},{default:t(()=>[d.value===null?(z(),J(D,{key:0,class:"text-center mx-auto my-5",width:"300"},{default:t(()=>[a(W,null,{default:t(()=>[a(fa,{type:"info",variant:"text",class:"mb-5"},{default:t(()=>[i(" Aún no se ha iniciado la evaluación ")]),_:1}),a(g,{block:"",onClick:O},{default:t(()=>[i(" Iniciar Evaluación ")]),_:1})]),_:1})]),_:1})):(z(),J(le,{key:1},{default:t(()=>[a(L,{cols:"12"},{default:t(()=>[a(D,{rounded:"0",elevation:"0"},{default:t(()=>[a(X,{density:"compact",title:S.value[0].name},{default:t(()=>[a(U),a(g,{"append-icon":"mdi-plus",onClick:o[0]||(o[0]=l=>v.value=!0),variant:"outlined",rounded:"lg",class:"me-4"},{default:t(()=>[i(" Agregar ")]),_:1})]),_:1},8,["title"]),(z(!0),ae(Z,null,re(y.value,(l,x)=>(z(),J(Y,{key:l.Id,class:"border-b py-2"},{prepend:t(()=>[a(te,null,{default:t(()=>[i(T((parseInt(l.Score)*parseInt(l.Amount)).toFixed(2)),1)]),_:2},1024)]),append:t(()=>[a(g,{icon:"",rounded:"lg",variant:"tonal",color:"red",onClick:Se=>q(l.Id,x,"FA"),loading:l.loading},{default:t(()=>[a(N,null,{default:t(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick","loading"])]),default:t(()=>[a(qe,null,{default:t(()=>[i(T(l.EvaluationIndicatorId===1?"Título profesional":"Maestría"),1)]),_:2},1024),a(H,null,{default:t(()=>[i(T(l.Observations),1)]),_:2},1024)]),_:2},1024))),128)),a(Y,{class:"border-b py-2"},{default:t(()=>[a(H,{class:"text-end"},{default:t(()=>[a(Q,{class:"mr-4",label:"",size:"large",color:"primary"},{default:t(()=>[K("strong",null,T(c.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{cols:"12"},{default:t(()=>[a(D,{rounded:"0",elevation:"0"},{default:t(()=>[a(X,{density:"compact",title:S.value[1].name},{default:t(()=>[a(U)]),_:1},8,["title"]),a(Y,{class:"py-2 border-b",title:"Año(s) de experiencia"},{prepend:t(()=>[a(te,null,{default:t(()=>[i(T(_.value.length===0?0 .toFixed(2):(parseInt(_.value[0].Score)*parseInt(_.value[0].Amount)).toFixed(2)),1)]),_:1})]),append:t(()=>[a(g,{icon:"",rounded:"lg",variant:"tonal",color:"red",loading:E.value,onClick:b},{default:t(()=>[a(N,null,{default:t(()=>[i("mdi-minus")]),_:1})]),_:1},8,["loading"]),a(g,{icon:"",rounded:"lg",variant:"tonal",color:"blue",loading:$.value,onClick:G},{default:t(()=>[a(N,null,{default:t(()=>[i("mdi-plus")]),_:1})]),_:1},8,["loading"])]),_:1}),a(Y,{class:"border-b py-2"},{default:t(()=>[a(H,{class:"text-end"},{default:t(()=>[a(Q,{class:"mr-4",label:"",size:"large",color:"primary"},{default:t(()=>[K("strong",null,T(f.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{cols:"12"},{default:t(()=>[a(D,{rounded:"0",elevation:"0"},{default:t(()=>[a(X,{density:"compact",title:S.value[2].name},{default:t(()=>[a(U),a(g,{"append-icon":"mdi-plus",onClick:o[1]||(o[1]=l=>I.value=!0),variant:"outlined",rounded:"lg",class:"me-4"},{default:t(()=>[i(" Agregar ")]),_:1})]),_:1},8,["title"]),(z(!0),ae(Z,null,re(p.value,(l,x)=>(z(),J(Y,{key:l.Id,class:"border-b py-2"},{prepend:t(()=>[a(te,null,{default:t(()=>[i(T((parseFloat(l.Score)*parseFloat(l.Amount)).toFixed(2)),1)]),_:2},1024)]),append:t(()=>[a(g,{icon:"",rounded:"lg",variant:"tonal",color:"red",onClick:Se=>q(l.Id,x,"C"),loading:l.loading},{default:t(()=>[a(N,null,{default:t(()=>[i("mdi-delete")]),_:1})]),_:2},1032,["onClick","loading"])]),default:t(()=>[a(H,null,{default:t(()=>[i(T(l.Observations),1)]),_:2},1024)]),_:2},1024))),128)),a(Y,{class:"border-b py-2"},{default:t(()=>[a(H,{class:"text-end"},{default:t(()=>[a(Q,{class:"mr-4",label:"",size:"large",color:"primary"},{default:t(()=>[K("strong",null,T(B.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(L,{cols:"12"},{default:t(()=>[a(D,{rounded:"0",elevation:"0"},{default:t(()=>[a(X,{title:"Calificación Final"},{default:t(()=>[a(U),a(Q,{class:"mr-4",label:"",size:"x-large",color:"blue"},{default:t(()=>[K("strong",null,T(k.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),a(ce,{modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=l=>v.value=l),"max-width":"600"},{default:t(()=>[a(me,{ref:"formAddFA","lazy-validation":"",onSubmit:ie(w,["prevent"])},{default:t(()=>[a(D,null,{default:t(()=>[a(ue,null,{default:t(()=>[i(" Agregar Formación Académica ")]),_:1}),a(W,null,{default:t(()=>[a(le,null,{default:t(()=>[a(L,{cols:"12"},{default:t(()=>[a(na,{modelValue:u.value.indicator,"onUpdate:modelValue":o[2]||(o[2]=l=>u.value.indicator=l),label:"Indicador",items:A.value,"item-title":"name","item-value":"id","return-object":!0},null,8,["modelValue","items"])]),_:1}),a(L,{cols:"12"},{default:t(()=>[a(fe,{modelValue:u.value.description,"onUpdate:modelValue":o[3]||(o[3]=l=>u.value.description=l),label:"Descripción"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(de,null,{default:t(()=>[a(U),a(g,{variant:"tonal",color:"error",onClick:o[4]||(o[4]=l=>v.value=!1)},{default:t(()=>[i("Cancelar")]),_:1}),a(g,{color:"primary",variant:"flat",type:"submit",loading:h.value},{default:t(()=>[i("Guardar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]),a(ce,{modelValue:I.value,"onUpdate:modelValue":o[8]||(o[8]=l=>I.value=l),"max-width":"600"},{default:t(()=>[a(me,{ref:"FormC",onSubmit:ie(R,["prevent"])},{default:t(()=>[a(D,null,{default:t(()=>[a(ue,null,{default:t(()=>[i(" Agregar Capacitación ")]),_:1}),a(W,null,{default:t(()=>[a(le,null,{default:t(()=>[a(L,{cols:"12"},{default:t(()=>[a(fe,{modelValue:C.value.description,"onUpdate:modelValue":o[6]||(o[6]=l=>C.value.description=l),label:"Descripción"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(de,null,{default:t(()=>[a(U),a(g,{color:"error",variant:"tonal",onClick:o[7]||(o[7]=l=>I.value=!1)},{default:t(()=>[i("Cancelar")]),_:1}),a(g,{color:"primary",type:"submit",variant:"flat",loading:F.value},{default:t(()=>[i("Guardar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])],64))}}),xe=Symbol.for("vuetify:v-tabs"),pa=ne({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Je(We({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ba=oe()({name:"VTab",props:pa(),setup(e,r){let{slots:u,attrs:n}=r;const{textColorClasses:C,textColorStyles:y}=_e(e,"sliderColor"),c=s(),_=s(),f=j(()=>e.direction==="horizontal"),p=j(()=>{var k,v;return((v=(k=c.value)==null?void 0:k.group)==null?void 0:v.isSelected.value)??!1});function B(k){var h,I;let{value:v}=k;if(v){const F=(I=(h=c.value)==null?void 0:h.$el.parentElement)==null?void 0:I.querySelector(".v-tab--selected .v-tab__slider"),E=_.value;if(!F||!E)return;const $=getComputedStyle(F).color,d=F.getBoundingClientRect(),A=E.getBoundingClientRect(),S=f.value?"x":"y",m=f.value?"X":"Y",O=f.value?"right":"bottom",w=f.value?"width":"height",R=d[S],G=A[S],b=R>G?d[O]-A[O]:d[S]-A[S],q=Math.sign(b)>0?f.value?"right":"bottom":Math.sign(b)<0?f.value?"left":"top":"center",V=(Math.abs(b)+(Math.sign(b)<0?d[w]:A[w]))/Math.max(d[w],A[w])||0,o=d[w]/A[w]||0,l=1.5;Ke(E,{backgroundColor:[$,"currentcolor"],transform:[`translate${m}(${b}px) scale${m}(${o})`,`translate${m}(${b/l}px) scale${m}(${(V-1)/l+1})`,"none"],transformOrigin:Array(3).fill(q)},{duration:225,easing:Qe})}}return Ve(()=>{const k=g.filterProps(e);return a(g,ee({symbol:xe,ref:c,class:["v-tab",e.class],style:e.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},k,n,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":B}),{...u,default:()=>{var v;return a(Z,null,[((v=u.default)==null?void 0:v.call(u))??e.text,!e.hideSlider&&a("div",{ref:_,class:["v-tab__slider",C.value],style:y.value},null)])}})}),Xe({},c)}});function ga(e){return e?e.map(r=>ta(r)?r:{text:r,value:r}):[]}const ya=ne({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...la({mandatory:"force"}),...be(),...ge()},"VTabs"),Ta=oe()({name:"VTabs",props:ya(),emits:{"update:modelValue":e=>!0},setup(e,r){let{slots:u}=r;const n=ye(e,"modelValue"),C=j(()=>ga(e.items)),{densityClasses:y}=Ce(e),{backgroundColorClasses:c,backgroundColorStyles:_}=Ze(P(e,"bgColor"));return ea({VTab:{color:P(e,"color"),direction:P(e,"direction"),stacked:P(e,"stacked"),fixed:P(e,"fixedTabs"),sliderColor:P(e,"sliderColor"),hideSlider:P(e,"hideSlider")}}),Ve(()=>{const f=ve.filterProps(e);return a(ve,ee(f,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},y.value,c.value,e.class],style:[{"--v-tabs-height":aa(e.height)},_.value,e.style],role:"tablist",symbol:xe}),{default:()=>[u.default?u.default():C.value.map(p=>a(ba,ee(p,{key:p.text}),null))]})}),{}}});export{Ta as V,wa as _,ba as a,Aa as g};
