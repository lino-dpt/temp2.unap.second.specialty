import{C as oe,Z as ue,G as se,H as ie,J as re,K as v,aK as L,r as V,N as ce,Q as de,a3 as fe,b as a,S as _,F as k,Y as me,O as pe,aL as ve,d as Ve,o as B,l as j,w as o,n as ye,y as U,B as E,m as ge,f as Ce,a as he,t as z,h as A,i as P,c as ke,ab as be}from"./index-Cpba7QVi.js";import{V as O,d as Ie,c as Pe,a as we}from"./VCard-BeaLY7Br.js";import{a as Se,V as Fe}from"./VChip-CJF47lsE.js";import{V as _e}from"./VForm-CuMe0f8B.js";import{m as Be,b as ze,c as Ae,V as G,f as Ne,d as Re,e as xe}from"./VInput-DEMVTei1.js";const De=oe({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Be({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ue(e).every(m=>m!=null&&typeof m=="object")},...ze({clearable:!0})},"VFileInput"),Te=se()({name:"VFileInput",inheritAttrs:!1,props:De(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,m){let{attrs:p,emit:c,slots:u}=m;const{t:b}=ie(),s=re(e,"modelValue"),{isFocused:y,focus:r,blur:i}=Ae(e),n=v(()=>typeof e.showSize!="boolean"?e.showSize:void 0),w=v(()=>(s.value??[]).reduce((t,l)=>{let{size:g=0}=l;return t+g},0)),N=v(()=>L(w.value,n.value)),S=v(()=>(s.value??[]).map(t=>{const{name:l="",size:g=0}=t;return e.showSize?`${l} (${L(g,n.value)})`:l})),K=v(()=>{var l;const t=((l=s.value)==null?void 0:l.length)??0;return e.showSize?b(e.counterSizeString,t,N.value):b(e.counterString,t)}),R=V(),x=V(),d=V(),q=v(()=>y.value||e.active),D=v(()=>["plain","underlined"].includes(e.variant));function F(){var t;d.value!==document.activeElement&&((t=d.value)==null||t.focus()),y.value||r()}function H(t){var l;(l=d.value)==null||l.click()}function J(t){c("mousedown:control",t)}function Q(t){var l;(l=d.value)==null||l.click(),c("click:control",t)}function Y(t){t.stopPropagation(),F(),pe(()=>{s.value=[],ve(e["onClick:clear"],t)})}return ce(s,t=>{(!Array.isArray(t)||!t.length)&&d.value&&(d.value.value="")}),de(()=>{const t=!!(u.counter||e.counter),l=!!(t||u.details),[g,Z]=fe(p),{modelValue:Me,...W}=G.filterProps(e),X=Ne(e);return a(G,_({ref:R,modelValue:s.value,"onUpdate:modelValue":C=>s.value=C,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":D.value},e.class],style:e.style,"onClick:prepend":H},g,W,{centerAffix:!D.value,focused:y.value}),{...u,default:C=>{let{id:I,isDisabled:h,isDirty:T,isReadonly:$,isValid:ee}=C;return a(Re,_({ref:x,"prepend-icon":e.prependIcon,onMousedown:J,onClick:Q,"onClick:clear":Y,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},X,{id:I.value,active:q.value||T.value,dirty:T.value,disabled:h.value,focused:y.value,error:ee.value===!1}),{...u,default:ae=>{var M;let{props:{class:te,...le}}=ae;return a(k,null,[a("input",_({ref:d,type:"file",readonly:$.value,disabled:h.value,multiple:e.multiple,name:e.name,onClick:f=>{f.stopPropagation(),$.value&&f.preventDefault(),F()},onChange:f=>{if(!f.target)return;const ne=f.target;s.value=[...ne.files??[]]},onFocus:F,onBlur:i},le,Z),null),a("div",{class:te},[!!((M=s.value)!=null&&M.length)&&(u.selection?u.selection({fileNames:S.value,totalBytes:w.value,totalBytesReadable:N.value}):e.chips?S.value.map(f=>a(Se,{key:f,size:"small",color:e.color},{default:()=>[f]})):S.value.join(", "))])])}})},details:l?C=>{var I,h;return a(k,null,[(I=u.details)==null?void 0:I.call(u,C),t&&a(k,null,[a("span",null,null),a(xe,{active:!!((h=s.value)!=null&&h.length),value:K.value},u.counter)])])}:void 0})}),me({},R,x,d)}}),$e={class:"headline"},Ge=Ve({__name:"index",setup(e){const m=V([]),p=V(!1),c=V({programId:"",programName:"",file:null}),u=async()=>{const i=await(await fetch("https://data.segundas.unap.edu.pe/api/results")).json();m.value=i},b=async r=>{p.value=!0,c.value={programId:r.ProgramId,programName:r.ProgramName,file:null}},s=async()=>{const r=new FormData;r.append("programId",c.value.programId),r.append("file",c.value.file[0]),await(await fetch("https://data.segundas.unap.edu.pe/api/results",{method:"POST",body:r})).json()&&await u(),p.value=!1};return(async()=>{await u()})(),(r,i)=>(B(),j(k,null,[a(ye,null,{default:o(()=>[a(U,{subtitle:"Pulicacion de resultados",title:"Resultados"}),a(E)]),_:1}),a(O,null,{default:o(()=>[(B(!0),j(k,null,ge(m.value,n=>(B(),ke(U,{key:n.id,class:"border-b"},{append:o(()=>[a(A,{onClick:w=>b(n),color:n.Path?"success":"primary"},{default:o(()=>[P(z(n.Path?"Actualizar":"Publicar"),1)]),_:2},1032,["onClick","color"])]),default:o(()=>[a(be,null,{default:o(()=>[P(z(n.ProgramName),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),a(Fe,{modelValue:p.value,"onUpdate:modelValue":i[2]||(i[2]=n=>p.value=n),"max-width":"500px"},{default:o(()=>[a(_e,{onSubmit:Ce(s,["prevent"])},{default:o(()=>[a(O,null,{default:o(()=>[a(Ie,null,{default:o(()=>[he("span",$e,z(c.value.programName),1)]),_:1}),a(Pe,null,{default:o(()=>[a(Te,{modelValue:c.value.file,"onUpdate:modelValue":i[0]||(i[0]=n=>c.value.file=n),label:"Archivo",required:""},null,8,["modelValue"])]),_:1}),a(we,{class:"mt-3"},{default:o(()=>[a(E),a(A,{color:"red darken-1",onClick:i[1]||(i[1]=n=>p.value=!1),variant:"tonal"},{default:o(()=>[P(" Cancelar ")]),_:1}),a(A,{type:"submit"},{default:o(()=>[P(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});export{Ge as default};
